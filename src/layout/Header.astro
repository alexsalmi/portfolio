---
import { Menu, Sun } from '@lucide/astro';
import { DROPDOWN_MENU_ID, MENU_TOGGLE_BUTTON_ID, THEME_TOGGLE_BUTTON_ID } from '../constants';
import Navigation from '../components/Navigation.astro';
---
<header>
	<section class="mainHeader">
		<h1 class="title">Alex Salmi</h1>
		<Navigation />
		<button class="themeBtn" id={THEME_TOGGLE_BUTTON_ID}>
			<Sun class='icon'/>
		</button>
		<button class="menuBtn" id={MENU_TOGGLE_BUTTON_ID}>
			<Menu class='icon'/>
		</button>
	</section>
	<section class="dropdownMenu" id={DROPDOWN_MENU_ID}>
		<Navigation direction='vertical'/>
	</section>
</header>

<style>
	header {
		width: calc(100% - 1rem);
		max-width: 1440px;
		background: var(--background-primary-blurred);
		position: fixed;
		top: 0.5em;
		border-radius: 0.75rem;
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
		font-size: 1.1rem;
		font-weight: 500;
		transition: box-shadow 0.1s linear;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	header.shadow {
		box-shadow: 0 0 0.33rem var(--shadow);
	}
	
	header.animate-in {
		animation: 0.25s linear header-in;
	}

	header.animate-out {
		animation: 0.25s linear header-out;
		transform: translateY(-5rem);
	}

	.mainHeader {
		width: 100%;
		height: 3rem;
		padding: 0.5rem 1rem 0.5rem 1.5rem;
		display: flex;
		justify-content: center;
		align-items: center;
		gap: 1.5rem;
	}

	.title {
		font-size: 1.25rem;
		font-weight: 600;
		margin-left: 0;
		margin-right: auto;
	}
	.themeBtn {
		height: 2rem;
		width: 2rem;
		border-radius: 0.5rem;
		display: flex;
		justify-content: center;
		align-items: center;
		margin-right: 0;
		margin-left: auto;
		background-color: inherit;
		transition: background-color 0.25s ease;
	}

	.themeBtn:hover {
		background-color: var(--background-secondary);
		transform: scale(1.05);
	}

	.themeBtn:hover > .icon {
		opacity: 1;
	}

	.icon {
		background-color: inherit;
		color: var(--foreground);
		opacity: 1;
		transition: opacity 0.25s ease;
	}

	.menuBtn {
		display: none;
	}

	.menuBtn > .icon {
		opacity: 1;
	}

	.dropdownMenu {
		width: calc(100% - 1rem);
		height: fit-content;
		opacity: 0;
		overflow: hidden;
		height: 0;
		transition: all 0.25s ease;
	}
	
	.expanded {
		height: 11.75rem;
		opacity: 1;
	}

	@media (max-width: 800px) {
		.menuBtn {
			display: block;
		}
	}
</style>